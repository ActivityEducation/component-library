import{r as a,j as t,t as E}from"./iframe-DGiRyBXK.js";import{c as R}from"./emotion-styled-base.browser.esm-DOJJeMjc.js";import{a as k,T as H}from"./index-BBibW3za.js";import{B as l}from"./index-CAB9-Wky.js";import{I as F}from"./index-BTINV_SO.js";import{S as O,O as g}from"./index-CdcOTgf7.js";import{I as s}from"./index-Cln6lCsR.js";import{M as V,a as w}from"./index-C-mCeCnK.js";const u=e=>{if(typeof window>"u"||!window.getSelection)return!1;try{return document.queryCommandState(e)}catch{return!1}},P=e=>{if(typeof window>"u"||!window.getSelection||!e)return"p";const m=window.getSelection();if(!m||m.rangeCount===0)return"p";let h=m.getRangeAt(0).commonAncestorContainer;for(;h&&h!==e;){if(h.nodeType===Node.ELEMENT_NODE){const n=h.tagName.toLowerCase();if(["p","h1","h2","h3","h4","h5","h6","ul","ol","li","div","pre"].includes(n))return n}h=h.parentNode}return"p"},_=R("div",{target:"eu383y22"})("border:1px solid ",e=>e.theme.colors.border.default,";border-radius:",e=>e.theme.borderRadius.md,";overflow:hidden;background-color:",e=>e.theme.colors.background.surface,";font-family:",e=>e.theme.typography.fontFamily,";color:",e=>e.theme.colors.text.default,";display:flex;flex-direction:column;"),D=R(H,{target:"eu383y21"})("border-bottom:1px solid ",e=>e.theme.colors.border.default,";border-bottom-left-radius:",e=>e.theme.borderRadius.none,";border-bottom-right-radius:",e=>e.theme.borderRadius.none,";padding:",e=>e.theme.spacing.sm,";flex-wrap:wrap;"),J=R("div",{target:"eu383y20"})("min-height:200px;padding:",e=>e.theme.spacing.lg,";outline:none;overflow-y:auto;line-height:",e=>e.theme.typography.body.lineHeight,";font-size:",e=>e.theme.typography.body.fontSize,";color:",e=>e.theme.colors.text.default,";background-color:",e=>e.theme.colors.background.default,";p{margin-bottom:",e=>e.theme.spacing.sm,";&:last-child{margin-bottom:0;}}h1{",e=>e.theme.typography.h1,";margin-bottom:",e=>e.theme.spacing.md,";margin-top:",e=>e.theme.spacing.lg,";}h2{",e=>e.theme.typography.h2,";margin-bottom:",e=>e.theme.spacing.md,";margin-top:",e=>e.theme.spacing.lg,";}h3{",e=>e.theme.typography.h3,";margin-bottom:",e=>e.theme.spacing.sm,";margin-top:",e=>e.theme.spacing.md,";}h4{",e=>e.theme.typography.h4,";margin-bottom:",e=>e.theme.spacing.sm,";margin-top:",e=>e.theme.spacing.md,";}h5{",e=>e.theme.typography.h5,";margin-bottom:",e=>e.theme.spacing.xs,";margin-top:",e=>e.theme.spacing.sm,";}h6{",e=>e.theme.typography.h6,";margin-bottom:",e=>e.theme.spacing.xs,";margin-top:",e=>e.theme.spacing.sm,";}ul,ol{padding-left:",e=>e.theme.spacing.xl,";margin-bottom:",e=>e.theme.spacing.sm,";}li{margin-bottom:",e=>e.theme.spacing.xs,";}&:empty:not(:focus)::before{content:attr(data-placeholder);color:",e=>e.theme.colors.neutral[60],";pointer-events:none;display:block;}strike{text-decoration:line-through;}pre{font-family:'SFMono-Regular',Consolas,'Liberation Mono',Menlo,Courier,monospace;font-size:0.9em;background-color:",e=>e.theme.colors.neutral[95],";border:1px solid ",e=>e.theme.colors.neutral[80],";border-radius:",e=>e.theme.borderRadius.sm,";padding:",e=>e.theme.spacing.sm,";margin-bottom:",e=>e.theme.spacing.sm,";overflow-x:auto;white-space:pre-wrap;word-break:break-all;}"),K=({placeholder:e="Start typing...",initialContent:m="",...h})=>{const n=a.useRef(null),[o,N]=a.useState({bold:!1,italic:!1,underline:!1,strikeThrough:!1,link:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,justify:!1,blockquote:!1,bulletList:!1,orderedList:!1}),[I,M]=a.useState("p"),[L,x]=a.useState(!1),[y,b]=a.useState(""),S=a.useRef(null),C=a.useCallback(()=>{window.getSelection&&(window.getSelection()?.rangeCount??0)>0&&(S.current=window.getSelection()?.getRangeAt(0)??null)},[]),j=a.useCallback(()=>{if(S.current&&n.current){const i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(S.current),n.current.focus())}},[]),f=a.useCallback(()=>{if(typeof window>"u"||!window.getSelection)return;const i=window.getSelection();if(!i||i.rangeCount===0)return;const c={bold:u("bold"),italic:u("italic"),underline:u("underline"),strikeThrough:u("strikeThrough"),link:u("createLink"),alignLeft:u("justifyLeft"),alignCenter:u("justifyCenter"),alignRight:u("justifyRight"),justify:u("justifyFull"),blockquote:u("blockquote"),bulletList:u("insertUnorderedList"),orderedList:u("insertOrderedList")};N(c),M(P(n.current))},[]),r=a.useCallback((i,c=void 0)=>{if(j(),document.queryCommandSupported(i)){if(i==="formatBlock"&&n.current){const d=window.getSelection();if(d&&d.rangeCount>0){const G=d.getRangeAt(0);let T=null,p=G.commonAncestorContainer;for(;p&&p!==n.current;){if(p.nodeType===Node.ELEMENT_NODE){const v=p.tagName.toLowerCase();if(["p","h1","h2","h3","h4","h5","h6","ul","ol","li","div","pre"].includes(v)){T=p;break}}p=p.parentNode}if(T){const v=document.createRange();v.selectNodeContents(T),d.removeAllRanges(),d.addRange(v)}else d.isCollapsed&&n.current.innerText.trim()===""&&n.current.focus()}}document.execCommand(i,!1,c),setTimeout(()=>{f()},0)}},[j,f]),W=a.useCallback(()=>{if(n.current){if(n.current.innerHTML.trim()===""&&!L){if(n.current.innerHTML===""){n.current.innerHTML="<br>";const i=document.createRange(),c=window.getSelection();n.current.firstChild&&(i.selectNodeContents(n.current.firstChild),i.collapse(!0),c?.removeAllRanges(),c?.addRange(i))}}else if(n.current.innerHTML==="<br>"&&n.current.innerText.trim()!=="")n.current.innerHTML=n.current.innerText;else if(n.current.innerHTML.trim()!==""&&n.current.querySelector("p, h1, h2, h3, h4, h5, h6, ul, ol, pre")===null){const i=n.current.innerText.trim();if(i!==""){n.current.innerHTML=`<p>${i}</p>`;const c=document.createRange();c.selectNodeContents(n.current.firstChild),c.collapse(!1);const d=window.getSelection();d?.removeAllRanges(),d?.addRange(c)}}}f()},[f,L]),z=a.useCallback(()=>{C(),f()},[C,f]),A=a.useCallback(()=>{C(),n.current&&n.current.innerHTML.trim()==="<br>"&&(n.current.innerHTML="")},[C]);a.useEffect(()=>{if(n.current){if(m){n.current.innerHTML=m;const i=document.createRange(),c=window.getSelection();i.selectNodeContents(n.current),i.collapse(!1),c?.removeAllRanges(),c?.addRange(i)}else n.current.innerHTML="";f()}},[m,f]);const B=a.useCallback(()=>{if(o.link)x(!1),b(""),r("unlink");else{j(),x(!0);const i=window.getSelection();if(i&&i.rangeCount>0){const d=i.getRangeAt(0).startContainer.parentElement?.closest("a");d&&b(d.href)}}},[o.link,r,j]),q=a.useCallback(()=>{y.trim()&&(r("createLink",y),x(!1),b(""))},[y,r]),Y=a.useCallback(()=>{x(!1),b("")},[]),U=a.useCallback(()=>{r("unlink"),x(!1),b("")},[r]);return t.jsxs(_,{style:h.style,children:[t.jsxs(D,{children:[t.jsxs(O,{value:I,onValueChange:i=>r("formatBlock",i),placeholder:"Format",style:{minWidth:"150px",marginRight:E.spacing.md},children:[t.jsx(g,{value:"p",children:"Paragraph"}),t.jsx(g,{value:"h1",children:"Heading 1"}),t.jsx(g,{value:"h2",children:"Heading 2"}),t.jsx(g,{value:"h3",children:"Heading 3"}),t.jsx(g,{value:"h4",children:"Heading 4"}),t.jsx(g,{value:"h5",children:"Heading 5"}),t.jsx(g,{value:"h6",children:"Heading 6"}),t.jsx(g,{value:"pre",children:"Preformatted"})]}),t.jsxs(k,{children:[t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("bold"),active:o.bold,title:"Bold",children:t.jsx(s,{name:"fa-solid fa-bold",size:"sm"})}),t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("italic"),active:o.italic,title:"Italic",children:t.jsx(s,{name:"fa-solid fa-italic",size:"sm"})}),t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("underline"),active:o.underline,title:"Underline",children:t.jsx(s,{name:"fa-solid fa-underline",size:"sm"})}),t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("strikeThrough"),active:o.strikeThrough,title:"Strikethrough",children:t.jsx(s,{name:"fa-solid fa-strikethrough",size:"sm"})}),t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("removeFormat"),title:"Clear Formatting",children:t.jsx(s,{name:"fa-solid fa-eraser",size:"sm"})})]}),t.jsx(k,{children:t.jsxs(V,{trigger:t.jsxs(l,{variant:"icon",size:"sm",active:o.alignLeft||o.alignCenter||o.alignRight||o.justify,title:"Alignment",children:[o.alignLeft&&t.jsx(s,{name:"fa-solid fa-align-left",size:"sm"}),o.alignCenter&&t.jsx(s,{name:"fa-solid fa-align-center",size:"sm"}),o.alignRight&&t.jsx(s,{name:"fa-solid fa-align-right",size:"sm"}),o.justify&&t.jsx(s,{name:"fa-solid fa-align-justify",size:"sm"}),!(o.alignLeft||o.alignCenter||o.alignRight||o.justify)&&t.jsx(s,{name:"fa-solid fa-align-left",size:"sm"})]}),children:[t.jsxs(w,{onClick:()=>r("justifyLeft"),children:[t.jsx(s,{name:"fa-solid fa-align-left",size:"sm"})," Align Left"]}),t.jsxs(w,{onClick:()=>r("justifyCenter"),children:[t.jsx(s,{name:"fa-solid fa-align-center",size:"sm"})," Align Center"]}),t.jsxs(w,{onClick:()=>r("justifyRight"),children:[t.jsx(s,{name:"fa-solid fa-align-right",size:"sm"})," Align Right"]}),t.jsxs(w,{onClick:()=>r("justifyFull"),children:[t.jsx(s,{name:"fa-solid fa-align-justify",size:"sm"})," Justify"]})]})}),t.jsxs(k,{children:[t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("insertUnorderedList"),active:o.bulletList,title:"Bullet List",children:t.jsx(s,{name:"fa-solid fa-list-ul",size:"sm"})}),t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("insertOrderedList"),active:o.orderedList,title:"Numbered List",children:t.jsx(s,{name:"fa-solid fa-list-ol",size:"sm"})}),t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("blockquote"),active:o.blockquote,title:"Blockquote",children:t.jsx(s,{name:"fa-solid fa-quote-right",size:"sm"})})]}),t.jsxs(k,{children:[t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("undo"),title:"Undo",children:t.jsx(s,{name:"fa-solid fa-undo",size:"sm"})}),t.jsx(l,{variant:"icon",size:"sm",onClick:()=>r("redo"),title:"Redo",children:t.jsx(s,{name:"fa-solid fa-redo",size:"sm"})})]}),t.jsxs(k,{children:[t.jsx(l,{variant:"icon",size:"sm",onClick:B,active:o.link,title:"Insert Link",children:t.jsx(s,{name:"fa-solid fa-link",size:"sm"})}),o.link&&t.jsx(l,{variant:"icon",size:"sm",onClick:U,title:"Remove Link",children:t.jsx(s,{name:"fa-solid fa-unlink",size:"sm"})})]})]}),L&&t.jsxs(H,{style:{padding:E.spacing.sm,borderBottom:`1px solid ${E.colors.border.default}`},children:[t.jsx(F,{value:y,onChange:i=>b(i.target.value),placeholder:"Enter URL",style:{flexGrow:1}}),t.jsx(l,{onClick:q,size:"sm",variant:"primary",children:"Insert"}),t.jsx(l,{onClick:Y,size:"sm",variant:"ghost",children:"Cancel"})]}),t.jsx(J,{ref:n,contentEditable:!0,onInput:W,onBlur:A,onKeyUp:z,onMouseUp:z,"data-placeholder":e,suppressContentEditableWarning:!0})]})};K.__docgenInfo={description:`The **WYSIWYGEditor** component provides a basic What-You-See-Is-What-You-Get (WYSIWYG)
rich text editing experience. It allows users to format text, apply headings, create lists,
and insert links using a familiar toolbar interface. The editor leverages the browser's
native \`contentEditable\` attribute and \`document.execCommand\` for basic formatting operations.

\`\`\`typescript
import { WYSIWYGEditor } from "@activityeducation/component-library";
\`\`\`

## Justification
A WYSIWYG editor is a fundamental component for any application requiring rich text input,
such as content creation, messaging, or note-taking. It empowers users to express
themselves clearly and effectively by providing formatting options without requiring
knowledge of HTML or Markdown. By building upon existing UI Kit components (Button, Toolbar, Input, Select),
this editor ensures a consistent look and feel with the rest of the application,
reduces bundle size by reusing existing primitives, and simplifies maintenance.
It offers a user-friendly way to create visually appealing and structured content.

## Acceptance Criteria
- **GIVEN** the editor is empty, **THEN** the \`placeholder\` text should be visible.
- **GIVEN** \`initialContent\` is provided, **THEN** the editor should load with that HTML content.
- **WHEN** text is selected and a formatting button (e.g., Bold, Italic, Underline) is clicked,
**THEN** the selected text should be formatted accordingly.
- **WHEN** the cursor is within formatted text, **THEN** the corresponding toolbar button
should show an active state.
- **WHEN** a block format (e.g., Heading 1, Paragraph) is selected from the dropdown,
**THEN** the current block of text should change its format.
- **WHEN** the "Insert Link" button is clicked, **THEN** a URL input field should appear,
allowing the user to insert a hyperlink.
- **WHEN** a link is active on the selected text, **THEN** a "Remove Link" button should
appear in the toolbar.
- **WHEN** a list type (bullet or numbered) is selected, **THEN** the text should
transform into the chosen list format.
- **WHEN** the editor loses focus and its content is empty, **THEN** it should revert
to a state where the placeholder is visible.

## Example & Props`,methods:[],displayName:"WYSIWYGEditor",props:{placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text for the editor when it's empty.",defaultValue:{value:"'Start typing...'",computed:!1}},initialContent:{required:!1,tsType:{name:"string"},description:"Optional initial HTML content to load into the editor.",defaultValue:{value:"''",computed:!1}},css:{required:!1,tsType:{name:"SerializedStyles"},description:"Optional Emotion `css` prop for additional custom styles for the outer container."}}};export{K as W};
