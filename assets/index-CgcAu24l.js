import{r,j as s,t as ee}from"./iframe-RAegngwO.js";import{c as l}from"./emotion-styled-base.browser.esm-DWA-sfXA.js";import{B as x}from"./index-BnQmYvSi.js";import{S as te}from"./index-ChMzI1xi.js";import{P as re}from"./index-ClUEGz-i.js";import{C as ne}from"./index-DWXvOp7D.js";const z=t=>{const m=Math.floor(t/60),h=Math.floor(t%60),g=String(m).padStart(2,"0"),d=String(h).padStart(2,"0");return`${g}:${d}`},ae=l("div",{target:"e1jdwgrz9"})("position:relative;width:100%;max-width:800px;background-color:#000;border-radius:",t=>t.theme.borderRadius.md,";overflow:hidden;box-shadow:",t=>t.theme.shadows.lg,";aspect-ratio:16/9;display:flex;justify-content:center;align-items:center;&:hover .controls-overlay{opacity:1;}"),se=l("video",{target:"e1jdwgrz8"})({name:"29i6ub",styles:"width:100%;height:100%;display:block;object-fit:contain;background-color:black"}),oe=l("img",{target:"e1jdwgrz7"})({name:"1235t56",styles:"position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:1"}),ie=l("div",{target:"e1jdwgrz6"})("position:absolute;bottom:0;left:0;right:0;height:100%;display:flex;flex-direction:column;justify-content:flex-end;background:linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 100%);opacity:",t=>t.show?1:0,";transition:opacity 0.3s ease-in-out;pointer-events:",t=>t.show?"auto":"none",";z-index:2;"),le=l("div",{target:"e1jdwgrz5"})("display:flex;align-items:center;padding:",t=>t.theme.spacing.sm," ",t=>t.theme.spacing.lg,";gap:",t=>t.theme.spacing.md,";color:#fff;flex-wrap:wrap;"),ce=l("span",{target:"e1jdwgrz4"})("font-family:",t=>t.theme.typography.fontFamily,";font-size:",t=>t.theme.typography.bodySmall.fontSize,";color:#fff;white-space:nowrap;"),de=l("div",{target:"e1jdwgrz3"})("display:flex;flex-direction:row;align-items:center;gap:",t=>t.theme.spacing.md,";width:120px;flex-shrink:0;"),ue=l("div",{target:"e1jdwgrz2"})("position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0, 0, 0, 0.8);display:flex;align-items:center;justify-content:center;z-index:10;padding:",t=>t.theme.spacing.xl,";&>div{max-width:90%;max-height:90%;overflow-y:auto;}"),fe=l("div",{target:"e1jdwgrz1"})("position:relative;width:calc(100% - 20px);margin-inline:auto;height:",t=>t.theme.spacing.sm,";cursor:pointer;"),pe=l("div",{target:"e1jdwgrz0"})("position:absolute;top:50%;left:",t=>t.position,"%;transform:translate(-50%, -50%);width:8px;height:8px;background-color:",t=>t.theme.colors.secondary[40],";border-radius:",t=>t.theme.borderRadius.full,";z-index:5;pointer-events:none;"),me=({src:t,title:m="Video Player",autoPlay:h=!1,loop:g=!1,muted:d=!1,interrupts:b=[],placeholderImage:L,...U})=>{const n=r.useRef(null),v=r.useRef(null),[i,w]=r.useState(h),[M,R]=r.useState(0),[f,D]=r.useState(0),[C,q]=r.useState(d?0:1),[p,k]=r.useState(d),[c,O]=r.useState(!1),[W,y]=r.useState(!0),[X,F]=r.useState(!1),[A,B]=r.useState(null),[o,$]=r.useState(!1),S=r.useRef(new Set),u=r.useRef(null),j=r.useCallback(()=>{w(!0),F(!0)},[]),P=r.useCallback(()=>w(!1),[]),T=r.useCallback(()=>{if(n.current){const e=n.current.currentTime;if(R(e),!o){for(const a of b)if(e>=a.timestampSeconds&&e<a.timestampSeconds+.5&&!S.current.has(a.id)){n.current.pause(),B(a),$(!0),S.current.add(a.id);break}}}},[b,o]),E=r.useCallback(()=>{n.current&&(D(n.current.duration),n.current.volume=d?0:1)},[d]),I=r.useCallback(()=>{n.current&&(q(n.current.volume),k(n.current.muted))},[]),V=r.useCallback(()=>{w(!1),n.current&&!g&&(n.current.currentTime=0),S.current.clear(),F(!1)},[g]);r.useEffect(()=>{const e=n.current;return e&&(e.addEventListener("play",j),e.addEventListener("pause",P),e.addEventListener("timeupdate",T),e.addEventListener("loadedmetadata",E),e.addEventListener("volumechange",I),e.addEventListener("ended",V)),()=>{e&&(e.removeEventListener("play",j),e.removeEventListener("pause",P),e.removeEventListener("timeupdate",T),e.removeEventListener("loadedmetadata",E),e.removeEventListener("volumechange",I),e.removeEventListener("ended",V))}},[j,P,T,E,I,V]),r.useEffect(()=>{const e=()=>{O(document.fullscreenElement===v.current)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);const N=r.useCallback(async()=>{o||n.current&&(i?await n.current.pause():await n.current.play().catch(e=>{console.error("Failed to play video via user interaction:",e)}))},[i,o]),G=r.useCallback(e=>{if(n.current){const a=e/100*f;n.current.currentTime=a,R(a)}},[f]),H=r.useCallback(e=>{if(n.current){const a=e/100;n.current.volume=a,k(a===0)}},[]),_=r.useCallback(()=>{n.current&&(n.current.muted=!p,k(!p),p&&n.current.volume===0&&(n.current.volume=.5,q(.5)))},[p]),K=r.useCallback(()=>{v.current&&(document.fullscreenElement?document.exitFullscreen():v.current.requestFullscreen().catch(e=>{console.error(`Error attempting to enable full-screen mode: ${e.message} (${e.name})`)}))},[]),J=r.useCallback(()=>{y(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{i&&!c&&!o&&y(!1)},3e3)},[i,c,o]),Q=r.useCallback(()=>{i&&!c&&!o&&y(!1),u.current&&clearTimeout(u.current)},[i,c,o]);r.useEffect(()=>{(!i||c||o)&&(y(!0),u.current&&clearTimeout(u.current))},[i,c,o]);const Y=r.useCallback(()=>{$(!1),B(null),n.current&&n.current.play().catch(e=>console.error("Resume play failed:",e))},[]);return s.jsxs(ae,{ref:v,onMouseMove:J,onMouseLeave:Q,onClick:N,title:m,...U,children:[L&&(!X||!i)&&s.jsx(oe,{src:L,alt:`${m} placeholder`}),s.jsx(se,{ref:n,src:t,loop:g,autoPlay:h,muted:d,preload:"metadata",title:m,controls:!1}),o&&A&&s.jsx(ue,{children:s.jsxs(ne,{style:{maxWidth:"400px",width:"100%",textAlign:"center"},children:[A.content,s.jsx(x,{variant:"primary",onClick:e=>{e.stopPropagation(),Y()},style:{marginTop:ee.spacing.md},children:"Continue"})]})}),s.jsxs(ie,{show:W||!i||c,className:"controls-overlay",children:[s.jsxs(fe,{onClick:e=>{if(o){e.stopPropagation();return}if(n.current&&e.currentTarget){const a=e.currentTarget.getBoundingClientRect(),Z=(e.clientX-a.left)/a.width*100;G(Z)}},children:[s.jsx(re,{value:M/f*100||0,max:100,style:{cursor:"pointer"}}),b.map(e=>{const a=e.timestampSeconds/f*100;return f>0&&!isNaN(a)&&isFinite(a)?s.jsx(pe,{position:a,title:`Interrupt at ${z(e.timestampSeconds)}`},e.id):null})]}),s.jsxs(le,{children:[s.jsx(x,{variant:"icon",size:"sm",onClick:e=>{e.stopPropagation(),N()},style:{color:"#fff"},disabled:o,children:i?"fa-solid fa-pause":"fa-solid fa-play"}),s.jsxs(de,{children:[s.jsx(x,{variant:"icon",style:{minWidth:"32px",color:"#fff"},size:"sm",onClick:e=>{e.stopPropagation(),_()},disabled:o,children:p||C===0?"fa-solid fa-volume-mute":C>.5?"fa-solid fa-volume-up":"fa-solid fa-volume-down"}),s.jsx(te,{min:0,max:100,step:1,value:p?0:C*100,onValueChange:H,onClick:e=>e.stopPropagation(),style:{flexGrow:1},disabled:o})]}),s.jsxs(ce,{children:[z(M)," / ",z(f)]}),s.jsx("div",{style:{flexGrow:1}}),s.jsx(x,{variant:"icon",size:"sm",onClick:e=>{e.stopPropagation(),K()},style:{color:"#fff"},disabled:o,children:c?"fa-solid fa-compress-arrows-alt":"fa-solid fa-expand-arrows-alt"})]})]})]})};me.__docgenInfo={description:`A custom VideoPlayer component for the AscendUCore Design System.
Provides a responsive video player with custom controls for playback,
volume, progress, and fullscreen, integrating other UI Kit components.
Now includes support for interactive interrupt elements at specific timestamps,
visually indicated on the progress bar, and a placeholder image.`,methods:[],displayName:"VideoPlayer",props:{src:{required:!0,tsType:{name:"string"},description:"The URL of the video source."},title:{required:!1,tsType:{name:"string"},description:"The title of the video, used for accessibility and display.",defaultValue:{value:"'Video Player'",computed:!1}},autoPlay:{required:!1,tsType:{name:"boolean"},description:`If true, the video will start playing automatically.
@default false`,defaultValue:{value:"false",computed:!1}},muted:{required:!1,tsType:{name:"boolean"},description:`If true, the video will be muted.
@default false`,defaultValue:{value:"false",computed:!1}},loop:{required:!1,tsType:{name:"boolean"},description:"If true, the video will loop after ending.",defaultValue:{value:"false",computed:!1}},interrupts:{required:!1,tsType:{name:"Array",elements:[{name:"VideoInterrupt"}],raw:"VideoInterrupt[]"},description:"An array of interactive interrupt elements to display at specific timestamps.",defaultValue:{value:"[]",computed:!1}},placeholderImage:{required:!1,tsType:{name:"string"},description:"URL for a placeholder image to display before the video loads or when paused."},css:{required:!1,tsType:{name:"SerializedStyles"},description:"Optional Emotion `css` prop for additional custom styles."}}};export{me as V};
