import{r as f,j as i,t}from"./iframe-CGsrx03R.js";import{c as g}from"./emotion-styled-base.browser.esm-BC397mIf.js";import"./index-DGGXf3yE.js";import{B as S}from"./index-BprbcPJ4.js";import{C as $}from"./index-CXpqd7mF.js";import"./index-uh6WqY2J.js";import"./index-CSqS4LGU.js";import"./index-CRc0bwpc.js";import{I as k}from"./index-DkVkd4wc.js";import{I as E}from"./index-Bzuh_yUB.js";import{L as V,a as G}from"./index-BGf0H-iM.js";import"./index-bulm4LNr.js";import"./index-BBXxrp55.js";import"./index-CjRWm0I6.js";import{S as H,O as C}from"./index-eRrpSMwI.js";import"./index-C9K3cZrX.js";import"./index-CgyzgMKf.js";import"./index-BSOYCvqO.js";import"./index-DVPYHcdf.js";import"./index-a0LAwP9U.js";import{T as W,a as U}from"./index-Vkrdh3Ik.js";import"./index-BUTFQX3f.js";import"./index-DdvfSKGW.js";import"./index-Dvw5kTVG.js";import"./ObjectiveProgress-Cawm-5jl.js";import"./UpcomingDeadlines-BgQUMTN8.js";const Z=g("div",{target:"e1chexqt2"})("max-height:400px;overflow-y:auto;position:relative;background-color:",t.colors.background.surface,";border-radius:",t.borderRadius.md,";box-shadow:",t.shadows.sm,";width:100%;box-sizing:border-box;&::-webkit-scrollbar{display:none;}scrollbar-width:none;-ms-overflow-style:none;"),J=g(G,{target:"e1chexqt1"})("cursor:default;padding:",t.spacing.sm," ",t.spacing.md,";font-size:",t.typography.bodySmall.fontSize,";line-height:",t.typography.bodySmall.lineHeight,";color:",t.colors.text.default,";width:100%;transition:background-color 0.2s ease-in-out,color 0.2s ease-in-out;border-bottom:1px solid ",t.colors.neutral[90],";&:last-child{border-bottom:none;}",c=>c.isActive&&`
    background-color: ${c.theme.colors.primary[95]}; /* Light primary background for active */
    color: ${c.theme.colors.primary[10]};            /* Dark text on active highlight */
    font-weight: ${c.theme.typography.body.fontWeight}; /* Slightly bolder */
  `,";"),K=g("div",{target:"e1chexqt0"})("display:flex;flex-direction:column;align-items:center;justify-content:center;padding:",t.spacing.lg,";text-align:center;width:100%;color:",t.colors.neutral[60],";",t.typography.bodySmall,";min-height:150px;"),Q=({transcript:c,currentTime:v,...a})=>{const s=f.useRef(null),h=c.find(d=>v>=d.start&&v<d.end);return f.useEffect(()=>{s.current&&s.current.scrollIntoView({behavior:"smooth",block:"center"})},[h]),i.jsx(Z,{...a,children:i.jsx($,{title:"Transcript",header:i.jsx(k,{name:"fa-solid fa-closed-captioning",size:"lg",color:t.colors.primary[50]}),style:{boxShadow:"none",borderRadius:"0",border:"none",padding:0},children:c.length>0?i.jsx(V,{style:{boxShadow:"none",borderRadius:"0"},children:c.map(d=>i.jsx(J,{ref:h&&h.id===d.id?s:null,isActive:h?.id===d.id,children:d.text},d.id))}):i.jsxs(K,{children:[i.jsx(k,{name:"fa-solid fa-file-alt",size:"xl"}),i.jsx("p",{children:"No transcript available."})]})})})};Q.__docgenInfo={description:"The Transcript component displays a video transcript, highlighting the sentence\nthat is currently being spoken based on the provided `currentTime`.\nIt automatically scrolls the active sentence into view.",methods:[],displayName:"Transcript",props:{transcript:{required:!0,tsType:{name:"Array",elements:[{name:"TranscriptSegment"}],raw:"TranscriptSegment[]"},description:"An array of transcript segments to display.\nEach segment should have a unique `id`, `text`, `start`, and `end` timestamp."},currentTime:{required:!0,tsType:{name:"number"},description:`The current playback time of the video in seconds.
This is used to determine which segment to highlight.`},css:{required:!1,tsType:{name:"SerializedStyles"},description:"Optional Emotion `css` prop for additional custom styles for the outer container."}}};const B=({fields:c,setFields:v,readOnly:a})=>{const[s,h]=f.useState(""),[d,D]=f.useState("text"),u=()=>{s.trim()&&!a&&(v(o=>[...o,{id:`field_${Date.now()}`,name:s.trim(),type:d}]),h(""))},F=o=>{a||v(x=>x.filter(w=>w.id!==o))};return i.jsxs("div",{children:[i.jsx("h3",{style:t.typography.h5,children:"Fields"}),!a&&i.jsxs("div",{style:{marginBottom:t.spacing.md},children:[i.jsx(E,{label:"Field Name",value:s,onChange:o=>h(o.target.value),placeholder:"e.g., Term, Definition"}),i.jsxs(H,{value:d,onValueChange:o=>D(o),style:{marginTop:t.spacing.sm,width:"100%"},children:[i.jsx(C,{value:"text",children:"Text"}),i.jsx(C,{value:"image",children:"Image"}),i.jsx(C,{value:"audio",children:"Audio"})]}),i.jsx(S,{onClick:u,variant:"primary",size:"sm",style:{marginTop:t.spacing.md,width:"100%"},children:"Add Field"})]}),!a&&i.jsx("h4",{style:t.typography.h6,children:"Available Fields"}),i.jsx("div",{children:c.length>0?c.map(o=>i.jsxs("div",{draggable:!a,onDragStart:x=>{x.dataTransfer.setData("fieldId",o.id)},style:{padding:t.spacing.sm,backgroundColor:t.colors.background.default,border:`1px solid ${t.colors.border.default}`,borderRadius:t.borderRadius.sm,marginBottom:t.spacing.xs,cursor:a?"default":"grab",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("span",{children:[o.name," (",o.type,")"]}),!a&&i.jsx(S,{variant:"icon",size:"sm",onClick:()=>F(o.id),title:"Delete Field",children:i.jsx(k,{name:"fa-solid fa-trash",size:"sm"})})]},o.id)):i.jsx("p",{style:t.typography.caption,children:"No fields defined."})})]})};B.__docgenInfo={description:"Panel for managing field definitions (add, rename, delete)",methods:[],displayName:"FieldDefinitionPanel",props:{fields:{required:!0,tsType:{name:"Array",elements:[{name:"EduFieldDefinition"}],raw:"EduFieldDefinition[]"},description:""},setFields:{required:!0,tsType:{name:"signature",type:"function",raw:"(fields: EduFieldDefinition[] | ((prevFields: EduFieldDefinition[]) => EduFieldDefinition[])) => void",signature:{arguments:[{type:{name:"union",raw:"EduFieldDefinition[] | ((prevFields: EduFieldDefinition[]) => EduFieldDefinition[])",elements:[{name:"Array",elements:[{name:"EduFieldDefinition"}],raw:"EduFieldDefinition[]"},{name:"unknown"}]},name:"fields"}],return:{name:"void"}}},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""}}};const b=8,p=8,y=c=>Math.round(c/b)*b,O=g("div",{target:"e2iejtf5"})("display:flex;background-color:",t.colors.background.default,";border-radius:",t.borderRadius.lg,";border:1px solid ",t.colors.border.default,";overflow:hidden;height:80vh;min-height:600px;font-family:",t.typography.fontFamily,";@media (max-width: ",t.breakpoints.md,"){flex-direction:column;height:auto;}"),ee=g("div",{target:"e2iejtf4"})("width:300px;flex-shrink:0;border-right:1px solid ",t.colors.border.default,";display:flex;flex-direction:column;background-color:",t.colors.background.toolbar,";padding:",t.spacing.md,";overflow-y:auto;@media (max-width: ",t.breakpoints.md,"){width:100%;border-right:none;border-bottom:1px solid ",t.colors.border.default,";}"),te=g("div",{target:"e2iejtf3"})("flex-grow:1;display:flex;flex-direction:column;padding:",t.spacing.md,";position:relative;"),ie=g("div",{target:"e2iejtf2"})("position:relative;background-color:",t.colors.background.default,";border:2px dashed ",t.colors.border.default,";border-radius:",t.borderRadius.md,";height:400px;width:100%;max-width:656px;margin-inline:auto;box-shadow:",t.shadows.sm,`;overflow:hidden;background-image:linear-gradient(
      to right,
      `,t.colors.neutral[95],` 1px,
      transparent 1px
    ),linear-gradient(to bottom, `,t.colors.neutral[95]," 1px, transparent 1px);background-size:",b,"px ",b,"px;"),L=g("div",{target:"e2iejtf1"})("position:absolute;padding:",t.spacing.sm,";border:1px solid ",t.colors.primary[80],";background-color:rgba(228, 243, 255, 0.7);color:",t.colors.primary[10],";font-size:",t.typography.bodySmall.fontSize,";border-radius:",t.borderRadius.sm,";cursor:grab;user-select:none;display:flex;align-items:center;justify-content:center;box-sizing:border-box;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:10;transition:border-color 0.2s ease-in-out;&:hover{border-color:",t.colors.primary[50],";}"),N=g("div",{target:"e2iejtf0"})("position:absolute;width:10px;height:10px;background-color:",t.colors.primary[60],";border:1px solid ",t.colors.background.default,";border-radius:50%;z-index:20;&.bottom-right{bottom:-5px;right:-5px;cursor:se-resize;}"),oe=({initialModelData:c,onSave:v,readOnly:a=!1})=>{const[s,h]=f.useState(c||{id:`model_${Date.now()}`,name:"",summary:"","edu:fields":[],"edu:cardTemplates":[{id:"front",name:"Front",layout:[]},{id:"back",name:"Back",layout:[]}]}),[d,D]=f.useState("Front"),[u,F]=f.useState({type:null,fieldId:null}),[o,x]=f.useState(null),w=f.useRef(null),q=e=>{h(n=>({...n,"edu:fields":typeof e=="function"?e(n["edu:fields"]):e}))},j=s["edu:cardTemplates"].find(e=>e.name===d),_=e=>{if(e.preventDefault(),a)return;const n=e.dataTransfer.getData("fieldId");if(!n||j.layout.some(I=>I.fieldId===n))return;const r=w.current.getBoundingClientRect(),l=e.clientX-r.left,m=e.clientY-r.top,T={fieldId:n,x:y(Math.max(p,l-75)),y:y(Math.max(p,m-25)),width:160,height:64};z([...j.layout,T])},M=(e,n,r)=>{if(a||e.button!==0)return;e.stopPropagation();const l=j.layout.find(T=>T.fieldId===n);if(!l)return;x(l);const m=r==="resize"?e.currentTarget.parentElement:e.currentTarget;F({type:r,fieldId:n,offsetX:e.clientX-m.getBoundingClientRect().left,offsetY:e.clientY-m.getBoundingClientRect().top})},X=e=>{if(a||!u.type||!u.fieldId||!o)return;e.preventDefault();const n=w.current.getBoundingClientRect();if(u.type==="move"){let r=e.clientX-n.left-u.offsetX,l=e.clientY-n.top-u.offsetY;r=Math.max(p,Math.min(r,n.width-o.width-p)),l=Math.max(p,Math.min(l,n.height-o.height-p)),x(m=>m?{...m,x:r,y:l}:null)}else if(u.type==="resize"){let r=e.clientX-n.left-o.x,l=e.clientY-n.top-o.y;r=Math.max(b*2,Math.min(r,n.width-o.x-p)),l=Math.max(b*2,Math.min(l,n.height-o.y-p)),x(m=>m?{...m,width:r,height:l}:null)}},R=()=>{if(a||!u.type||!u.fieldId||!o)return;const e=w.current.getBoundingClientRect();let n=y(o.x),r=y(o.y),l=y(o.width),m=y(o.height);n=Math.max(p,n),r=Math.max(p,r),n+l>e.width-p&&(l=y(e.width-p-n)),r+m>e.height-p&&(m=y(e.height-p-r));const T={...o,x:n,y:r,width:Math.max(b*2,l),height:Math.max(b*2,m)},I=j.layout.map(A=>A.fieldId===u.fieldId?T:A);z(I),F({type:null,fieldId:null}),x(null)},z=e=>{h(n=>({...n,"edu:cardTemplates":n["edu:cardTemplates"].map(r=>r.name===d?{...r,layout:e}:r)}))},Y=()=>{const e={...s,"edu:stylingCSS":"/* CSS would be generated here */"};v(e)},P=f.useMemo(()=>j.layout.filter(e=>e.fieldId!==u.fieldId),[j.layout,u.fieldId]);return i.jsxs(O,{children:[i.jsxs(ee,{children:[i.jsx("h2",{style:{...t.typography.h4,marginTop:0},children:"Flashcard Template"}),a?i.jsxs(i.Fragment,{children:[i.jsx("h3",{style:{...t.typography.h6,margin:0},children:s.name}),i.jsx("p",{children:s.summary})]}):i.jsxs("div",{style:{marginBottom:t.spacing.md},children:[i.jsx(E,{label:"Model Name",value:s.name,onChange:e=>h({...s,name:e.target.value}),placeholder:"e.g., Vocabulary Card"}),i.jsx(E,{label:"Summary",value:s.summary||"",onChange:e=>h({...s,summary:e.target.value}),placeholder:"A brief description",style:{marginTop:t.spacing.sm}})]}),i.jsx(B,{fields:s["edu:fields"],setFields:q,readOnly:a})]}),i.jsxs(te,{children:[i.jsxs(W,{style:{justifyContent:"space-between",flexShrink:0,marginBottom:t.spacing.sm,backgroundColor:"white"},children:[i.jsx(U,{children:i.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>D(d==="Back"?"Front":"Back"),style:{display:"flex",gap:"0.5rem"},active:d==="Front",children:[i.jsx(k,{name:"fa-solid fa-rotate",size:"sm"}),i.jsx("span",{children:d})]})}),!a&&i.jsx(S,{onClick:Y,variant:"primary",size:"sm",children:"Save"})]}),i.jsxs(ie,{ref:w,onDrop:_,onDragOver:e=>e.preventDefault(),onMouseMove:X,onMouseUp:R,onMouseLeave:R,children:[P.map(e=>{const n=s["edu:fields"].find(r=>r.id===e.fieldId);return n?i.jsxs(L,{style:{left:e.x,top:e.y,width:e.width,height:e.height},onMouseDown:r=>M(r,e.fieldId,"move"),children:[n.name,!a&&i.jsx(N,{className:"bottom-right",onMouseDown:r=>M(r,e.fieldId,"resize")})]},e.fieldId):null}),o&&i.jsxs(L,{style:{left:o.x,top:o.y,width:o.width,height:o.height},onMouseDown:e=>M(e,o.fieldId,"move"),children:[s["edu:fields"].find(e=>e.id===o.fieldId)?.name,!a&&i.jsx(N,{className:"bottom-right",onMouseDown:e=>M(e,o.fieldId,"resize")})]})]})]})]})};oe.__docgenInfo={description:"The main editor component",methods:[],displayName:"FlashcardModelEditor",props:{initialModelData:{required:!1,tsType:{name:"EduFlashcardModel"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(updatedModel: EduFlashcardModel) => void",signature:{arguments:[{type:{name:"EduFlashcardModel"},name:"updatedModel"}],return:{name:"void"}}},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{oe as F,Q as T};
