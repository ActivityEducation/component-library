import{r as h,j as e,t,e as G}from"./iframe-Ar-X8pQt.js";import{c as b}from"./emotion-styled-base.browser.esm-B8HPte8b.js";import"./index-Baa3c0Fm.js";import{B as M}from"./index-BSHTpJs8.js";import{C as P}from"./index-DZdvrq6_.js";import"./index-CvWfj89Q.js";import{F as V}from"./index-DokTa-H9.js";import"./index-DVGkWuR8.js";import{I as k}from"./index-BwlLiWkr.js";import{I as E}from"./index-DgZTqrqY.js";import{L as O,a as Z}from"./index-KQnlWmIa.js";import"./index-KzwPCFbT.js";import"./index-BzI_E8QB.js";import"./index-3mBt0PIo.js";import{S as U,O as D}from"./index-Bm8rY8Ou.js";import"./index-BwciHENB.js";import"./index-DWsyDxQ4.js";import"./index-BU6KqAtY.js";import"./index-C4ZGTXxO.js";import"./index-D1xG6tFM.js";import{T as J,a as K}from"./index-w15-tIMF.js";import"./index-nkbhxHg5.js";import"./index-CFBQAgRo.js";import"./index-CIaXkleZ.js";import"./ObjectiveProgress-s2KhK5il.js";import"./UpcomingDeadlines-BK5OOyH5.js";const Q=b("div",{target:"e1chexqt2"})("max-height:400px;overflow-y:auto;position:relative;background-color:",t.colors.background.surface,";border-radius:",t.borderRadius.md,";box-shadow:",t.shadows.sm,";width:100%;box-sizing:border-box;&::-webkit-scrollbar{display:none;}scrollbar-width:none;-ms-overflow-style:none;"),ee=b(Z,{target:"e1chexqt1"})("cursor:default;padding:",t.spacing.sm," ",t.spacing.md,";font-size:",t.typography.bodySmall.fontSize,";line-height:",t.typography.bodySmall.lineHeight,";color:",t.colors.text.default,";width:100%;transition:background-color 0.2s ease-in-out,color 0.2s ease-in-out;border-bottom:1px solid ",t.colors.neutral[90],";&:last-child{border-bottom:none;}",d=>d.isActive&&`
    background-color: ${d.theme.colors.primary[95]}; /* Light primary background for active */
    color: ${d.theme.colors.primary[10]};            /* Dark text on active highlight */
    font-weight: ${d.theme.typography.body.fontWeight}; /* Slightly bolder */
  `,";"),te=b("div",{target:"e1chexqt0"})("display:flex;flex-direction:column;align-items:center;justify-content:center;padding:",t.spacing.lg,";text-align:center;width:100%;color:",t.colors.neutral[60],";",t.typography.bodySmall,";min-height:150px;"),ie=({transcript:d,currentTime:u,...a})=>{const s=h.useRef(null),p=d.find(o=>u>=o.start&&u<o.end);return h.useEffect(()=>{s.current&&s.current.scrollIntoView({behavior:"smooth",block:"center"})},[p]),e.jsx(Q,{...a,children:e.jsx(P,{title:"Transcript",header:e.jsx(k,{name:"fa-solid fa-closed-captioning",size:"lg",color:t.colors.primary[50]}),style:{boxShadow:"none",borderRadius:"0",border:"none",padding:0},children:d.length>0?e.jsx(O,{style:{boxShadow:"none",borderRadius:"0"},children:d.map(o=>e.jsx(ee,{ref:p&&p.id===o.id?s:null,isActive:p?.id===o.id,children:o.text},o.id))}):e.jsxs(te,{children:[e.jsx(k,{name:"fa-solid fa-file-alt",size:"xl"}),e.jsx("p",{children:"No transcript available."})]})})})};ie.__docgenInfo={description:"The Transcript component displays a video transcript, highlighting the sentence\nthat is currently being spoken based on the provided `currentTime`.\nIt automatically scrolls the active sentence into view.",methods:[],displayName:"Transcript",props:{transcript:{required:!0,tsType:{name:"Array",elements:[{name:"TranscriptSegment"}],raw:"TranscriptSegment[]"},description:"An array of transcript segments to display.\nEach segment should have a unique `id`, `text`, `start`, and `end` timestamp."},currentTime:{required:!0,tsType:{name:"number"},description:`The current playback time of the video in seconds.
This is used to determine which segment to highlight.`},css:{required:!1,tsType:{name:"SerializedStyles"},description:"Optional Emotion `css` prop for additional custom styles for the outer container."}}};const L=({fields:d,setFields:u,readOnly:a})=>{const[s,p]=h.useState(""),[o,m]=h.useState("text"),r=()=>{s.trim()&&!a&&(u(n=>[...n,{id:`field_${Date.now()}`,name:s.trim(),type:o}]),p(""))},y=n=>{a||u(w=>w.filter(T=>T.id!==n))};return e.jsxs("div",{children:[e.jsx("h3",{style:t.typography.h5,children:"Fields"}),!a&&e.jsxs(e.Fragment,{children:[e.jsx(E,{label:"Field Name",value:s,onChange:n=>p(n.target.value),placeholder:"e.g., Term, Definition"}),e.jsxs(U,{value:o,onValueChange:n=>m(n),style:{marginTop:t.spacing.sm,width:"100%"},children:[e.jsx(D,{value:"text",children:"Text"}),e.jsx(D,{value:"image",children:"Image"}),e.jsx(D,{value:"audio",children:"Audio"}),e.jsx(D,{value:"icon",children:"Icon"})]}),e.jsx(M,{onClick:r,variant:"primary",size:"sm",style:{marginTop:t.spacing.md,width:"100%"},children:"Add Field"})]}),e.jsx("h4",{style:t.typography.h6,children:"Available Fields"}),d.length>0?d.map(n=>e.jsxs("div",{draggable:!a,onDragStart:w=>{w.dataTransfer.setData("fieldId",n.id)},style:{padding:t.spacing.sm,border:`1px solid ${t.colors.border.default}`,borderRadius:t.borderRadius.sm,marginBottom:t.spacing.xs,cursor:a?"default":"grab",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{children:[n.name," (",n.type,")"]}),!a&&e.jsx(M,{variant:"icon",size:"sm",onClick:()=>y(n.id),title:"Delete Field",children:e.jsx(k,{name:"fa-solid fa-trash",size:"sm"})})]},n.id)):e.jsx("p",{style:t.typography.caption,children:"No fields defined."})]})};L.__docgenInfo={description:"Panel for managing field definitions (add, rename, delete)",methods:[],displayName:"FieldDefinitionPanel",props:{fields:{required:!0,tsType:{name:"Array",elements:[{name:"EduFieldDefinition"}],raw:"EduFieldDefinition[]"},description:""},setFields:{required:!0,tsType:{name:"signature",type:"function",raw:"(fields: EduFieldDefinition[] | ((prevFields: EduFieldDefinition[]) => EduFieldDefinition[])) => void",signature:{arguments:[{type:{name:"union",raw:"EduFieldDefinition[] | ((prevFields: EduFieldDefinition[]) => EduFieldDefinition[])",elements:[{name:"Array",elements:[{name:"EduFieldDefinition"}],raw:"EduFieldDefinition[]"},{name:"unknown"}]},name:"fields"}],return:{name:"void"}}},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""}}};const j=8,x=8,v=d=>Math.round(d/j)*j,ne=b("div",{target:"e2iejtf5"})("display:flex;background-color:",t.colors.background.default,";border-radius:",t.borderRadius.lg,";border:1px solid ",t.colors.border.default,";overflow:hidden;height:80vh;min-height:600px;font-family:",t.typography.fontFamily,";@media (max-width: ",t.breakpoints.md,"){flex-direction:column;height:auto;}"),oe=b("div",{target:"e2iejtf4"})("width:300px;flex-shrink:0;border-right:1px solid ",t.colors.border.default,";display:flex;flex-direction:column;background-color:",t.colors.background.toolbar,";padding:",t.spacing.md,";overflow-y:auto;@media (max-width: ",t.breakpoints.md,"){width:100%;border-right:none;border-bottom:1px solid ",t.colors.border.default,";}"),re=b("div",{target:"e2iejtf3"})("flex-grow:1;display:flex;flex-direction:column;padding:",t.spacing.md,";position:relative;"),ae=b("div",{target:"e2iejtf2"})("position:relative;background-color:",t.colors.background.default,";border:2px dashed ",t.colors.border.default,";border-radius:",t.borderRadius.md,";height:400px;width:100%;max-width:656px;margin-inline:auto;box-shadow:",t.shadows.sm,`;overflow:hidden;background-image:linear-gradient(
      to right,
      `,t.colors.neutral[95],` 1px,
      transparent 1px
    ),linear-gradient(to bottom, `,t.colors.neutral[95]," 1px, transparent 1px);background-size:",j,"px ",j,"px;"),_=b("div",{target:"e2iejtf1"})("position:absolute;padding:",t.spacing.sm,";border:1px solid ",t.colors.primary[80],";background-color:rgba(228, 243, 255, 0.7);color:",t.colors.primary[10],";font-size:",t.typography.bodySmall.fontSize,";border-radius:",t.borderRadius.sm,";cursor:grab;user-select:none;display:flex;align-items:center;justify-content:center;box-sizing:border-box;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:10;transition:border-color 0.2s ease-in-out;&:hover{border-color:",t.colors.primary[50],";}"),A=b("div",{target:"e2iejtf0"})("position:absolute;width:10px;height:10px;background-color:",t.colors.primary[60],";border:1px solid ",t.colors.background.default,";border-radius:50%;z-index:20;&.bottom-right{bottom:-5px;right:-5px;cursor:se-resize;}"),se=({initialModelData:d,onSave:u,readOnly:a=!1})=>{const[s,p]=h.useState(d||{id:`model_${Date.now()}`,name:"",summary:"","edu:fields":[],"edu:cardTemplates":[{id:"front",name:"Front",layout:[]},{id:"back",name:"Back",layout:[]}]}),[o,m]=h.useState("Front"),[r,y]=h.useState({type:null,fieldId:null}),[n,w]=h.useState(null),T=h.useRef(null),$=i=>{p(l=>({...l,"edu:fields":typeof i=="function"?i(l["edu:fields"]):i}))},S=s["edu:cardTemplates"].find(i=>i.name===o),H=i=>{if(i.preventDefault(),a)return;const l=i.dataTransfer.getData("fieldId");if(!l||S.layout.some(z=>z.fieldId===l))return;const c=T.current.getBoundingClientRect(),f=i.clientX-c.left,g=i.clientY-c.top,F={fieldId:l,x:v(Math.max(x,f-75)),y:v(Math.max(x,g-25)),width:160,height:64};R([...S.layout,F])},I=(i,l,c)=>{if(a||i.button!==0)return;i.stopPropagation();const f=S.layout.find(F=>F.fieldId===l);if(!f)return;w(f);const g=c==="resize"?i.currentTarget.parentElement:i.currentTarget;y({type:c,fieldId:l,offsetX:i.clientX-g.getBoundingClientRect().left,offsetY:i.clientY-g.getBoundingClientRect().top})},W=i=>{if(a||!r.type||!r.fieldId||!n)return;i.preventDefault();const l=T.current.getBoundingClientRect();if(r.type==="move"){let c=i.clientX-l.left-r.offsetX,f=i.clientY-l.top-r.offsetY;c=Math.max(x,Math.min(c,l.width-n.width-x)),f=Math.max(x,Math.min(f,l.height-n.height-x)),w(g=>g?{...g,x:c,y:f}:null)}else if(r.type==="resize"){let c=i.clientX-l.left-n.x,f=i.clientY-l.top-n.y;c=Math.max(j*2,Math.min(c,l.width-n.x-x)),f=Math.max(j*2,Math.min(f,l.height-n.y-x)),w(g=>g?{...g,width:c,height:f}:null)}},C=()=>{if(a||!r.type||!r.fieldId||!n)return;const i=T.current.getBoundingClientRect();let l=v(n.x),c=v(n.y),f=v(n.width),g=v(n.height);l=Math.max(x,l),c=Math.max(x,c),l+f>i.width-x&&(f=v(i.width-x-l)),c+g>i.height-x&&(g=v(i.height-x-c));const F={...n,x:l,y:c,width:Math.max(j*2,f),height:Math.max(j*2,g)},z=S.layout.map(N=>N.fieldId===r.fieldId?F:N);R(z),y({type:null,fieldId:null}),w(null)},R=i=>{p(l=>({...l,"edu:cardTemplates":l["edu:cardTemplates"].map(c=>c.name===o?{...c,layout:i}:c)}))},X=()=>{const i={...s,"edu:stylingCSS":"/* CSS would be generated here */"};u(i)},Y=h.useMemo(()=>S.layout.filter(i=>i.fieldId!==r.fieldId),[S.layout,r.fieldId]);return e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsx("h2",{style:{...t.typography.h4,marginTop:0},children:"Flashcard Template"}),a?e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{...t.typography.h6,margin:0},children:s.name}),e.jsx("p",{children:s.summary})]}):e.jsxs("div",{style:{marginBottom:t.spacing.md},children:[e.jsx(E,{label:"Model Name",value:s.name,onChange:i=>p({...s,name:i.target.value}),placeholder:"e.g., Vocabulary Card"}),e.jsx(E,{label:"Summary",value:s.summary||"",onChange:i=>p({...s,summary:i.target.value}),placeholder:"A brief description",style:{marginTop:t.spacing.sm}})]}),e.jsx(L,{fields:s["edu:fields"],setFields:$,readOnly:a})]}),e.jsxs(re,{children:[e.jsxs(J,{style:{justifyContent:"space-between",flexShrink:0,marginBottom:t.spacing.sm,backgroundColor:"white"},children:[e.jsx(K,{children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>m(o==="Back"?"Front":"Back"),style:{display:"flex",gap:"0.5rem"},active:o==="Front",children:[e.jsx(k,{name:"fa-solid fa-rotate",size:"sm"}),e.jsx("span",{children:o})]})}),!a&&e.jsx(M,{onClick:X,variant:"primary",size:"sm",children:"Save"})]}),e.jsxs(ae,{ref:T,onDrop:H,onDragOver:i=>i.preventDefault(),onMouseMove:W,onMouseUp:C,onMouseLeave:C,children:[Y.map(i=>{const l=s["edu:fields"].find(c=>c.id===i.fieldId);return l?e.jsxs(_,{style:{left:i.x,top:i.y,width:i.width,height:i.height},onMouseDown:c=>I(c,i.fieldId,"move"),children:[l.name,!a&&e.jsx(A,{className:"bottom-right",onMouseDown:c=>I(c,i.fieldId,"resize")})]},i.fieldId):null}),n&&e.jsxs(_,{style:{left:n.x,top:n.y,width:n.width,height:n.height},onMouseDown:i=>I(i,n.fieldId,"move"),children:[s["edu:fields"].find(i=>i.id===n.fieldId)?.name,!a&&e.jsx(A,{className:"bottom-right",onMouseDown:i=>I(i,n.fieldId,"resize")})]})]})]})]})};se.__docgenInfo={description:"The main editor component",methods:[],displayName:"FlashcardModelEditor",props:{initialModelData:{required:!1,tsType:{name:"EduFlashcardModel"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(updatedModel: EduFlashcardModel) => void",signature:{arguments:[{type:{name:"EduFlashcardModel"},name:"updatedModel"}],return:{name:"void"}}},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const B=633,de=400,le=12,ce=48,pe=b("div",{target:"e1gp3n793"})("width:100%;aspect-ratio:",B,"/",de,";position:relative;overflow:hidden;background-color:",t.colors.background.default,";border-radius:",t.borderRadius.lg,";box-shadow:",t.shadows.md,";border:1px solid ",t.colors.border.default,";"),ue=b("div",{target:"e1gp3n792"})({name:"g6papy",styles:"position:absolute;box-sizing:border-box;display:flex;justify-content:center;align-items:center;padding:8px;overflow:hidden"}),he=b("img",{target:"e1gp3n791"})({name:"ukfjzf",styles:"width:100%;height:100%;object-fit:contain"}),me=b("div",{target:"e1gp3n790"})({name:"fp0290",styles:"width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center;word-break:break-word;overflow-wrap:break-word;hyphens:auto"}),fe=(d,u,a)=>{const[s,p]=h.useState(100);return h.useEffect(()=>{if(u.current&&d){const o=u.current,m=!d.includes(" ");m?o.style.whiteSpace="nowrap":o.style.whiteSpace="normal";let r=ce*a;for(o.style.fontSize=`${r}px`;(o.scrollHeight>o.clientHeight||o.scrollWidth>o.clientWidth)&&r>le;)r--,o.style.fontSize=`${r}px`;m&&(o.style.whiteSpace="normal"),p(r)}},[d,u,a]),s},q=G.forwardRef(({template:d,model:u,data:a,scale:s},p)=>e.jsx(pe,{ref:p,children:d.layout.map(o=>{const m=u["edu:fields"].find(n=>n.id===o.fieldId),r=a["edu:fieldsData"][m?.name||""];if(!m||!r)return null;const y={left:`${o.x*s}px`,top:`${o.y*s}px`,width:`${o.width*s}px`,height:`${o.height*s}px`};return e.jsxs(ue,{style:y,children:[m.type==="text"&&e.jsx(ge,{text:r,scale:s}),m.type==="image"&&e.jsx(he,{src:r,alt:m.name}),m.type==="icon"&&e.jsx(k,{name:r,size:"lg"})]},o.fieldId)})})),ge=({text:d,scale:u})=>{const a=h.useRef(null),s=fe(d,a,u),[p,o]=h.useState(!1);return h.useEffect(()=>{const r=setTimeout(()=>{if(a.current){const y=a.current,n=y.scrollHeight>y.clientHeight||y.scrollWidth>y.clientWidth;o(n)}},50);return()=>clearTimeout(r)},[s,d,u,a]),e.jsx(me,{ref:a,style:{fontSize:`${s}px`,textOverflow:"ellipsis",overflow:"hidden"},title:p?d:void 0,children:d})},xe=({model:d,data:u})=>{const[a,s]=h.useState(1),p=h.useRef(null);h.useEffect(()=>{const r=new ResizeObserver(y=>{const n=y[0];if(n){const w=n.contentRect.width/B;s(w)}});return p.current&&r.observe(p.current),()=>r.disconnect()},[]);const o=d["edu:cardTemplates"].find(r=>r.name==="Front"),m=d["edu:cardTemplates"].find(r=>r.name==="Back");return!o||!m?null:e.jsx("div",{ref:p,style:{width:"100%"},children:e.jsx(V,{flipOnClick:!0,front:e.jsx(q,{template:o,model:d,data:u,scale:a}),back:e.jsx(q,{template:m,model:d,data:u,scale:a})})})};xe.__docgenInfo={description:"",methods:[],displayName:"Flashcard",props:{model:{required:!0,tsType:{name:"FlashcardModel"},description:""},data:{required:!0,tsType:{name:"FlashcardData"},description:""}}};export{xe as F,ie as T,se as a};
